<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Contributing" href="contributing.html" /><link rel="prev" title="API Reference" href="api_reference.html" />

    <link rel="shortcut icon" href="_static/rubicon_ml_logo_favicon.png"/><!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Representing model metadata with a schema - rubicon-ml v0.6.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=4af6793b" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand"><div class='version'>rubicon-ml v0.6.0</div></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/images/rubicon_ml_logo_only.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/images/rubicon_ml_logo_only.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><div class='version'>rubicon-ml v0.6.0</div></span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Quick Look</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quick-look/logging-experiments.html">Logging Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick-look/sharing-experiments.html">Sharing Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick-look/visualizing-experiments.html">Visualizing Experiments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/failure-modes.html">Ignoring Exceptions with Failure Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/logging-training-metadata.html">Logging Training Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/logging-plots.html">Logging Plots as PNGs</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/logging-concurrently.html">Logging Concurrently</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/log-with-schema.html">Logging with a schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/rubiconJSON-querying.html">Query projects &amp; experiments with <code class="docutils literal notranslate"><span class="pre">RubiconJSON</span></code></a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="visualizations.html">Visualizations</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Visualizations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="visualizations/dataframe-plot.html">Dataframe Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizations/experiments-table.html">Experiments Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizations/metric-correlation-plot.html">Metric Correlation Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizations/metric-lists-comparisons.html">Metric Lists Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizations/dashboard.html">Dashboard</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to...</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/logging-experiment-failures.html">Distinguish Failed Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations/integration-git.html">Integrate with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations/integration-prefect-workflows.html">Integrate with Prefect</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations/integration-sklearn.html">Integrate with Scikit-learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/logging-feature-plots.html">Link Plots to Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/multiple-backend.html">Log with Multiple Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/register-custom-schema.html">Register a custom schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/set-schema.html">Set a schema on a project</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-examples/visualizing-logged-dataframes.html">Visualize Logged Dataframes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Explanation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Representing model metadata with a schema</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute-schema.html">Contribute a schema</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/capitalone/rubicon-ml/releases">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/capitalone/rubicon-ml/issues/new/choose">Feedback</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/capitalone/rubicon-ml">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="representing-model-metadata-with-a-schema">
<span id="schema-representation"></span><h1>Representing model metadata with a schema<a class="headerlink" href="#representing-model-metadata-with-a-schema" title="Link to this heading">#</a></h1>
<p>A rubicon-ml schema is a YAML file defining how attributes of a Python object, generally
representing a model, will be logged to a rubicon-ml experiment. Schema can
be used to automatically instrument and standardize the rubicon-ml logging of commonly
used model objects.</p>
<p>Schema are used to log experiments to an existing rubicon-ml project.
Experiments consist of features, parameters, metrics, artifacts, and dataframes. More info
on each of these can be found in rubicon-ml’s glossary.</p>
<section id="a-simple-schema">
<h2>A simple schema<a class="headerlink" href="#a-simple-schema" title="Link to this heading">#</a></h2>
<p>Consider the following objects from a module called <code class="docutils literal notranslate"><span class="pre">my_model</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="k">class</span> <span class="nc">Optimizer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimized_</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="s2">&quot;optimized&quot;</span>

<span class="k">class</span> <span class="nc">Model</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">gamma</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimizer</span> <span class="o">=</span> <span class="n">Optimizer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">feature_names_in_</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_importances_</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">learned_attribute_</span> <span class="o">=</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">summary_</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">learned_attribute_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_</span><span class="p">]],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;learned_attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_</span>
</pre></div>
</div>
<p>The following is a complete YAML representation of the <code class="docutils literal notranslate"><span class="pre">Model</span></code> object’s schema:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>

<span class="nt">compatibility</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pandas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.5</span>
<span class="nt">docs_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://my-docs.com/my-model/Model.html</span>

<span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="w">    </span><span class="nt">data_object_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="nt">dataframes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary</span>
<span class="w">    </span><span class="nt">df_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_</span>
<span class="nt">features</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">names_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_names_in_</span>
<span class="w">    </span><span class="nt">importances_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_importances_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score_</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_metric</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_param</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PARAMETER</span>
</pre></div>
</div>
<section id="schema-metadata">
<h3>Schema metadata<a class="headerlink" href="#schema-metadata" title="Link to this heading">#</a></h3>
<p>The first section of the schema defines metadata about the schema itself,
like the name and version. <strong>The name of a schema should be the name of the
library the class it represents comes from and the name of the Python class itself separated
by a double underscore.</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
</pre></div>
</div>
<p>The next section defines any dependencies the model object has on external Python libraries.
Generally, this will be at least the library the object is imported from. Reference documentation
for the object to be logged can also be included in this section.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">compatibility</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pandas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.5</span>
<span class="nt">docs_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://my-docs.com/my-model/Model.html</span>
</pre></div>
</div>
<p>The remaining sections define how the attributes of the object will be logged to the
<code class="docutils literal notranslate"><span class="pre">rubicon-ml</span></code> experiment. In general, each section is a list of attributes to log to
<code class="docutils literal notranslate"><span class="pre">rubicon-ml</span></code> with a name for the logged metadata and the name of the attribute
containing the value to log.</p>
</section>
<section id="artifacts">
<h3>Artifacts<a class="headerlink" href="#artifacts" title="Link to this heading">#</a></h3>
<p>Define a <a class="reference internal" href="api_reference.html#library-reference-artifact"><span class="std std-ref">rubicon_ml.Artifact</span></a>
for logging by providing a <code class="docutils literal notranslate"><span class="pre">name</span></code> for the logged artifact and the attribute <code class="docutils literal notranslate"><span class="pre">data_object_attr</span></code>
containing the object to log. The special keyword <code class="docutils literal notranslate"><span class="pre">self</span></code> will log the full object the schema
represents as an artifact with the same name as the object’s class.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self</span><span class="w">             </span><span class="c1"># logs this Model as an artifact named &quot;Model&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span><span class="w">  </span><span class="c1"># logs Optimizer in `optimizer` attribute as an artifact named &quot;optimizer&quot;</span>
<span class="w">    </span><span class="nt">data_object_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
</pre></div>
</div>
</section>
<section id="dataframes">
<h3>Dataframes<a class="headerlink" href="#dataframes" title="Link to this heading">#</a></h3>
<p>Define a <a class="reference internal" href="api_reference.html#library-reference-dataframe"><span class="std std-ref">rubicon_ml.Dataframe</span></a>
for logging by providing a <code class="docutils literal notranslate"><span class="pre">name</span></code> for the logged dataframe and the attribute <code class="docutils literal notranslate"><span class="pre">df_attr</span></code>
containing the DataFrame to log.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dataframes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary</span><span class="w">  </span><span class="c1"># logs DataFrame in `summary_` attribute as a dataframe named &quot;summary&quot;</span>
<span class="w">    </span><span class="nt">df_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_</span>
</pre></div>
</div>
</section>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h3>
<p>Define a single <a class="reference internal" href="api_reference.html#library-reference-feature"><span class="std std-ref">rubicon_ml.Feature</span></a>
for logging by providing the attribute <code class="docutils literal notranslate"><span class="pre">name_attr</span></code> containing the name of the feature to log
and optionally the attribute <code class="docutils literal notranslate"><span class="pre">importance_attr</span></code> containing the feature’s importance.</p>
<p>Lists of features can be defined for logging with the attributes <code class="docutils literal notranslate"><span class="pre">names_attr</span></code> containing a
list of feature names to log and optionally <code class="docutils literal notranslate"><span class="pre">importances_attr</span></code> containing the corresponding
importances.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">features</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">names_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_names_in_</span><span class="w">  </span><span class="c1"># for each value in the `feature_names_in_` attribute, logs a feature named that</span>
<span class="w">                                   </span><span class="c1"># value with the corresponding importance in the `feature_importances_` attribute</span>
<span class="w">    </span><span class="nt">importances_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_importances_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target</span><span class="w">              </span><span class="c1"># logs a feature named the value of the `target` attribute</span>
</pre></div>
</div>
</section>
<section id="metrics">
<h3>Metrics<a class="headerlink" href="#metrics" title="Link to this heading">#</a></h3>
<p>Define a <a class="reference internal" href="api_reference.html#library-reference-metric"><span class="std std-ref">rubicon_ml.Metric</span></a>
for logging by providing a <code class="docutils literal notranslate"><span class="pre">name</span></code> for the logged metric and the attribute <code class="docutils literal notranslate"><span class="pre">value_attr</span></code>
containing the metric value to log.</p>
<p>Metric values can also be extracted from the runtime environment. Replace <code class="docutils literal notranslate"><span class="pre">value_attr</span></code> with <code class="docutils literal notranslate"><span class="pre">value_env</span></code> to
leverage <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> to read the metric value from the available environment variables.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute</span><span class="w">  </span><span class="c1"># logs value in `learned_attribute_` attribute as a metric named &quot;learned_attribute&quot;</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score</span><span class="w">              </span><span class="c1"># logs value in `score_` attribute as a metric named &quot;score&quot;</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score_</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_metric</span><span class="w">         </span><span class="c1"># logs value in `METRIC` environment varibale as a metric named &quot;env_metric&quot;</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC</span>
</pre></div>
</div>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h3>
<p>Define a <a class="reference internal" href="api_reference.html#library-reference-parameter"><span class="std std-ref">rubicon_ml.Parameter</span></a>
for logging by providing a <code class="docutils literal notranslate"><span class="pre">name</span></code> for the logged parameter and the attribute <code class="docutils literal notranslate"><span class="pre">value_attr</span></code>
containing the parameter value to log.</p>
<p>Parameter values can also be extracted from the runtime environment. Replace <code class="docutils literal notranslate"><span class="pre">value_attr</span></code> with <code class="docutils literal notranslate"><span class="pre">value_env</span></code> to
leverage <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> to read the parameter value from the available environment variables.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span><span class="w">      </span><span class="c1"># logs value in `alpha` attribute as a parameter named &quot;alpha&quot;</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span><span class="w">      </span><span class="c1"># logs value in `gamma` attribute as a parameter named &quot;gamma&quot;</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_param</span><span class="w">  </span><span class="c1"># logs value in `PARAMETER` environment varibale as a parameter named &quot;env_param&quot;</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PARAMETER</span>
</pre></div>
</div>
</section>
</section>
<section id="optional-attributes">
<h2>Optional attributes<a class="headerlink" href="#optional-attributes" title="Link to this heading">#</a></h2>
<p>In some cases, the attribute containing the value to log may not always be set on the underlying object. A model
may have been trained on a dataset with no feature names, or perhaps some learned attributes are only learned
if certain parameters have certain values while fitting.</p>
<p>By default, schema logging will raise an exception if the attribute to be logged is not set. To suppress the errors
and simply move on, items in the <code class="docutils literal notranslate"><span class="pre">artifacts</span></code>, <code class="docutils literal notranslate"><span class="pre">dataframes</span></code>, <code class="docutils literal notranslate"><span class="pre">features</span></code>, <code class="docutils literal notranslate"><span class="pre">metrics</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code> and
<code class="docutils literal notranslate"><span class="pre">schema</span></code> lists may optionally contain a key <code class="docutils literal notranslate"><span class="pre">optional</span></code> with a <strong>true</strong> value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">feature_names_in_</span></code> and <code class="docutils literal notranslate"><span class="pre">learned_attribute_</span></code> attributes are both marked optional in the example schema
above to handle cases where no feature names were present in the training data and <code class="docutils literal notranslate"><span class="pre">learned_attribute_</span></code> was
not learned:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">features</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">names_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_names_in_</span>
<span class="w">    </span><span class="nt">importances_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_importances_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">     </span><span class="c1"># will not error if `feature_importances_` attribute is not set</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target</span><span class="w">  </span><span class="c1"># **will** error if `target` attribute is not set</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">     </span><span class="c1"># will not error if `learned_attribute_` attribute is not set</span>
</pre></div>
</div>
<p><strong>Note:</strong> Optional items in <code class="docutils literal notranslate"><span class="pre">artifacts</span></code>, <code class="docutils literal notranslate"><span class="pre">dataframes</span></code>, <code class="docutils literal notranslate"><span class="pre">features</span></code>, and <code class="docutils literal notranslate"><span class="pre">schema</span></code> will omit the associated
entity from logging entirely if an optional attribute is not set. Optional items in <code class="docutils literal notranslate"><span class="pre">metrics</span></code> and <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
will log the associated entity with the given name and a value of <strong>None</strong> if an optional attribute is not set.</p>
</section>
<section id="nested-schema">
<h2>Nested schema<a class="headerlink" href="#nested-schema" title="Link to this heading">#</a></h2>
<p>The following is a complete YAML representation of the <code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> object’s schema:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Optimizer</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>

<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimized</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimized_</span>
</pre></div>
</div>
<p>To apply another schema to one of the attributes of the original object, provide the schema <code class="docutils literal notranslate"><span class="pre">name</span></code>
to be retrieved via <code class="docutils literal notranslate"><span class="pre">registry.get_schema</span></code> and the attribute <code class="docutils literal notranslate"><span class="pre">attr</span></code> containing the
object to apply the schema to.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Optimizer</span><span class="w">  </span><span class="c1"># logs a metric according to the above schema using the object in `optimizer`</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
</pre></div>
</div>
<p><strong>Note:</strong> Nested schema will add the logged entities to the original experiment created by the parent schema,
not a new experiment. Nested schema cannot have names that conflict with the entites logged by the parent
schema.</p>
<p>The complete schema now looks like this and will log an additional metric <code class="docutils literal notranslate"><span class="pre">optimized</span></code> as defined by the
<code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> schema to the original experiment:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>

<span class="nt">compatibility</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pandas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.5</span>
<span class="nt">docs_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://my-docs.com/my-model/Model.html</span>

<span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="w">    </span><span class="nt">data_object_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="nt">dataframes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary</span>
<span class="w">    </span><span class="nt">df_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_</span>
<span class="nt">features</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">names_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_names_in_</span>
<span class="w">    </span><span class="nt">importances_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_importances_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score_</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_metric</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_param</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PARAMETER</span>
<span class="nt">schema</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Optimizer</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
</pre></div>
</div>
</section>
<section id="hierarchical-schema">
<h2>Hierarchical schema<a class="headerlink" href="#hierarchical-schema" title="Link to this heading">#</a></h2>
<p>Some objects may contain a list of other objects that are already represented by a scehma, like
a feature eliminator or hyperparameter optimizer that trained multiple iterations of an underlying model
object.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">children</span></code> key can be provided to log each of these underlying objects to a <strong>new experiment</strong>. This
means that a single call to <code class="docutils literal notranslate"><span class="pre">project.log_with_schema</span></code> will log <strong>1+n</strong> experiments to <code class="docutils literal notranslate"><span class="pre">project</span></code> where
<strong>n</strong> is the number of objects in the list specified by <code class="docutils literal notranslate"><span class="pre">children</span></code>.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">children</span></code> key, provide the schema <code class="docutils literal notranslate"><span class="pre">name</span></code> for the children objects to be retrieved via
<code class="docutils literal notranslate"><span class="pre">registry.get_schema</span></code> and the attribute <code class="docutils literal notranslate"><span class="pre">attr</span></code> containing the list of child objects.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">children</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Optimizer</span><span class="w">  </span><span class="c1"># defines the children&#39;s schema</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizers</span><span class="w">           </span><span class="c1"># logs an experiment according to the schema for each object in `optimizers`</span>
</pre></div>
</div>
<p>If we replace the nested schema from the previous example with a list of children that adhere to the same
<code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> schema, the complete schema now looks like this. It will log a single experiment for <code class="docutils literal notranslate"><span class="pre">Model</span></code>
containing all the information in the original <code class="docutils literal notranslate"><span class="pre">Model</span></code> schema, as well as an additional experiment as
defined by the <code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> schema for each of the objects in <code class="docutils literal notranslate"><span class="pre">Model</span></code>’s <code class="docutils literal notranslate"><span class="pre">optimizers</span></code> list.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>

<span class="nt">compatibility</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pandas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.5</span>
<span class="nt">docs_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://my-docs.com/my-model/Model.html</span>

<span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="w">    </span><span class="nt">data_object_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizer</span>
<span class="nt">children</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Optimizer</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optimizers</span>
<span class="nt">dataframes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary</span>
<span class="w">    </span><span class="nt">df_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_</span>
<span class="nt">features</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">names_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_names_in_</span>
<span class="w">    </span><span class="nt">importances_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature_importances_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target</span>
<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">learned_attribute_</span>
<span class="w">    </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">score_</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_metric</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpha</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gamma</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env_param</span>
<span class="w">    </span><span class="nt">value_env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PARAMETER</span>
</pre></div>
</div>
</section>
<section id="extending-a-schema">
<h2>Extending a schema<a class="headerlink" href="#extending-a-schema" title="Link to this heading">#</a></h2>
<p>Consider an extension of <code class="docutils literal notranslate"><span class="pre">Model</span></code> named <code class="docutils literal notranslate"><span class="pre">NewModel</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NewModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_learned_attribute_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">learned_attribute_</span>

        <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</div>
<p>To extend an existing schema, provide the name of the schema to extend as the
<code class="docutils literal notranslate"><span class="pre">extends</span></code> key’s value after the new schema’s name. This new schema will log everything
in the schema represented by <code class="docutils literal notranslate"><span class="pre">extends</span></code> plus any additional values.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__NewModel</span>
<span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
</pre></div>
</div>
<p>The following is a complete YAML representation of the <code class="docutils literal notranslate"><span class="pre">NewModel</span></code> object’s schema.
This schema will log everything that the <code class="docutils literal notranslate"><span class="pre">Model</span></code> schema would with the addition of the
<code class="docutils literal notranslate"><span class="pre">other_learned_attribute</span></code> metric and <code class="docutils literal notranslate"><span class="pre">delta</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">NewModel</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__NewModel</span>
<span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_model__Model</span>
<span class="nt">verison</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>

<span class="nt">compatibility</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pandas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">min_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.5</span>
<span class="nt">docs_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://my-docs.com/my-model/NewModel.html</span>

<span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other_learned_attribute</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other_learned_attribute_</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
<span class="w">    </span><span class="nt">value_attr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
</pre></div>
</div>
<p>To see an extended schema in action, check out the “Register a custom
schema” section.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="contributing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Contributing</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="api_reference.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">API Reference</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, rubicon-ml developers
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Representing model metadata with a schema</a><ul>
<li><a class="reference internal" href="#a-simple-schema">A simple schema</a><ul>
<li><a class="reference internal" href="#schema-metadata">Schema metadata</a></li>
<li><a class="reference internal" href="#artifacts">Artifacts</a></li>
<li><a class="reference internal" href="#dataframes">Dataframes</a></li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#metrics">Metrics</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-attributes">Optional attributes</a></li>
<li><a class="reference internal" href="#nested-schema">Nested schema</a></li>
<li><a class="reference internal" href="#hierarchical-schema">Hierarchical schema</a></li>
<li><a class="reference internal" href="#extending-a-schema">Extending a schema</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>